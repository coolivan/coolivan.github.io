{"version":3,"sources":["main/components/Pagination.js","main/view/Home.js","main/view/About.js","main/view/Cart.js","main/view/Item.js","main/view/Login.js","main/view/NotFound.js","main/index.js","App.js","serviceWorker.js","index.js"],"names":["Pagination","goto","e","v","target","value","push","_this","props","history","keyCode","_this$props","this","pages","page","react_default","a","createElement","className","Array","fill","map","i","react_router_dom","key","to","type","onKeyDown","React","Component","defaultProps","withRouter","Home","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","changeSort","_ref","sort","location","pathname","setState","search","querystring","parse","ignoreQueryPrefix","state","_this$props2","items","match","params","b","price","Math","ceil","length","parseInt","slice","defaultValue","onChange","item","id","name","toFixed","components_Pagination","About","Cart","Item","console","log","Number","find","Login","usernameRef","createRef","passwordRef","onLogin","username","current","password","then","msg","alert","catch","ref","onClick","login","bind","NotFound","Main","user","users","_this2","Promise","resolve","reject","_this3","activeClassName","activeStyle","color","isActive","test","react_router","path","render","view_Home","assign","Item_Item","Cart_Cart","component","Login_Login","App","main_Main","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","ReactDOM","src_App","document","getElementById","URL","process","href","origin","addEventListener","concat","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.dcb4adcc.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link,withRouter} from 'react-router-dom';\r\n\r\nclass Pagination extends React.Component{\r\n\r\n    static defaultProps = {\r\n        pages:1,\r\n        page:1\r\n    }\r\n\r\n    static propTypes ={\r\n        pages:PropTypes.number,\r\n        page:PropTypes.number\r\n    }\r\n\r\n    goto = (e)=>{\r\n        let v = e.target.value;\r\n        let {history:{push}} = this.props;\r\n        if(e.keyCode===13 && v !== ''){\r\n            push('/'+v);\r\n            e.target.value = ''\r\n        }\r\n    }\r\n\r\n\r\n    render(){\r\n        let {pages,page} = this.props;\r\n\r\n        return (\r\n            <div className=\"pagination\">\r\n                {\r\n                    (new Array(pages)).fill('').map((v,i)=>{\r\n                        return (\r\n                            <Link\r\n                                key={++i}\r\n                                className={i=== page ? 'active' : ''}\r\n                                to = {'/'+ i}\r\n                            >\r\n                                {i}\r\n                            </Link>\r\n                        )\r\n                    })\r\n                }\r\n\r\n                <span>前往<input type=\"text\" className=\"goto\" onKeyDown={this.goto} />页</span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(Pagination)\r\n","import React from 'react';\r\nimport querystring from 'qs';\r\n// import {connect} from 'react-redux';\r\nimport {Link} from 'react-router-dom';\r\nimport Pagination from '../components/Pagination';\r\nclass Home extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        // 排序\r\n        let {location:{search}} = props;\r\n        let q = querystring.parse(search,{ignoreQueryPrefix:true});\r\n        let sort = q.sort || 'desc';\r\n        this.state={\r\n            sort:sort\r\n        }\r\n    }\r\n\r\n    changeSort=({target:{value:sort}})=>{\r\n        let {history:{push},location:{pathname}} = this.props;\r\n        push(pathname+'?sort='+sort);\r\n\r\n        this.setState({\r\n            sort:sort\r\n        })\r\n    }\r\n\r\n    render(){\r\n        // console.log(this.props);\r\n        let {items, match:{params:{page}} } = this.props;      \r\n        let {sort} = this.state;\r\n        items = items.sort((a,b)=> sort === 'asc' ? a.price - b.price : b.price - a.price);\r\n        // 分页\r\n        let pageSize=5; //每页5条\r\n        let pages = Math.ceil(items.length/pageSize);\r\n        page = parseInt(page)||1;\r\n        items = items.slice((page-1)*pageSize,page*pageSize);\r\n        \r\n        return(\r\n            <div>\r\n                <h1>Home</h1>\r\n                <hr/>\r\n                <ul className=\"item-list\">\r\n                    <li className=\"head\">\r\n                        <span>名称</span>\r\n                        <span>价格 \r\n                            <select defaultValue={sort} onChange={this.changeSort}>\r\n                                <option value=\"desc\">从高到低</option>\r\n                                <option value=\"asc\">从低到高</option>\r\n                            </select>\r\n                        </span>\r\n                    </li>\r\n                    {\r\n                        items.map(item=>(\r\n                            <li key={item.id}>\r\n                                <span>\r\n                                    <Link to={'/item/' + item.id}>{item.name}</Link>\r\n                                </span>\r\n                                <span>￥ {(item.price / 100).toFixed(2)}</span>\r\n                            </li>\r\n                        ))\r\n                    }\r\n                </ul>\r\n                <Pagination pages={pages} page={page}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n// export default connect( state=>({\r\n//     items:state.items\r\n// }))(Home);\r\n\r\nexport default Home;\r\n\r\n\r\n\r\n","import React from 'react';\r\n\r\nexport default class About extends React.Component{\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <h2>About</h2>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Cart extends React.Component{\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <h2>Cart</h2>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Item extends React.Component{\r\n\r\n    render(){\r\n        let items = this.props.items;\r\n\r\n        console.log(this.props)\r\n        let id = Number(this.props.match.params.id) || 0;\r\n        let item = items.find(item=>item.id === id);\r\n\r\n        return item?(\r\n            <div>\r\n              <h2>商品详情 - {item.name}</h2>\r\n              <p>ID:{item.id}</p>\r\n              <p>名称:{item.name}</p>\r\n              <p>价格:￥ {(item.price / 100).toFixed(2)}</p>\r\n            </div>\r\n        ):<div>不存在该商品！</div>\r\n\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class Login extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.usernameRef = React.createRef();\r\n        this.passwordRef = React.createRef();\r\n    }\r\n\r\n\r\n    login(){\r\n        let {onLogin,history:{push}} = this.props;\r\n        console.log(this.props)\r\n\r\n        if(typeof onLogin === 'function'){\r\n            onLogin({\r\n                username:this.usernameRef.current.value,\r\n                password:this.passwordRef.current.value\r\n            }).then(msg=>{\r\n                alert(msg);\r\n                push('/');\r\n            }).catch(e=>alert(e))\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"login\">\r\n                <p><label>用户名</label>: <input type=\"text\" ref={this.usernameRef}/></p>\r\n                <p><label>密码</label>: <input type=\"password\" ref={this.passwordRef}/></p>\r\n                <p><button onClick={this.login.bind(this)}>登录</button></p>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default function NotFound(){\r\n    return (\r\n        <div>\r\n            NotFound\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Route,\r\n    Link,\r\n    NavLink,\r\n    Switch,\r\n} from 'react-router-dom';\r\n\r\nimport Home from './view/Home';\r\nimport About from './view/About';\r\nimport Cart from './view/Cart';\r\nimport Item from './view/Item';\r\nimport Login from './view/Login';\r\nimport NotFound from './view/NotFound';\r\n\r\nimport './assets/css/index.css'\r\n\r\nexport default class Main extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            // 当前登录的用户信息\r\n            user: {\r\n                id: 0,\r\n                username: ''\r\n            },\r\n            users:[\r\n                {\r\n                    id: 1,\r\n                    username: 'ivan',\r\n                    password: '123456'\r\n                },\r\n                {\r\n                    id: 2,\r\n                    username: 'cool',\r\n                    password: '123456'\r\n                }\r\n            ],\r\n            items: [{\r\n                    id: 1,\r\n                    name: 'iPhone XR',\r\n                    price: 542500\r\n                },\r\n                {\r\n                    id: 2,\r\n                    name: 'Apple iPad Air 3',\r\n                    price: 377700\r\n                },\r\n                {\r\n                    id: 3,\r\n                    name: 'Macbook Pro 15.4',\r\n                    price: 1949900\r\n                },\r\n                {\r\n                    id: 4,\r\n                    name: 'Apple iMac',\r\n                    price: 1629900\r\n                },\r\n                {\r\n                    id: 5,\r\n                    name: 'Apple Magic Mouse',\r\n                    price: 72900\r\n                },\r\n                {\r\n                    id: 6,\r\n                    name: 'Apple Watch Series 4',\r\n                    price: 599900\r\n                }\r\n            ]\r\n        }\r\n    }\r\n\r\n\r\n    login({username,password}){\r\n        return new Promise((resolve,reject)=>{\r\n            if(!username || !password){\r\n                reject('请输入用户名和密码')\r\n            }\r\n\r\n            let user = this.state.users.find(user=>{\r\n                return user.username === username && user.password === password;\r\n            })\r\n            console.log(user)\r\n\r\n            if(user){\r\n                resolve('登录成功')\r\n            }else{\r\n                reject('用户不存在或密码错误')\r\n            }\r\n\r\n            this.setState({\r\n                user:{\r\n                    id:user.id,\r\n                    username:user.username\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n            <Router>\r\n                <nav>\r\n                    <NavLink to=\"/\" activeClassName=\"active\" activeStyle={{color:'red'}} isActive={(a,b)=>{\r\n                        // return b.pathname === '/' || b.pathname.startsWith('/item')\r\n                        return /^\\/[(item/\\d*)(\\d*)]*$/.test(b.pathname)\r\n                    }}>Home</NavLink>\r\n\r\n                    <span> | </span>\r\n\r\n                    <NavLink to=\"/about\" activeClassName=\"active\" activeStyle={{color:'red'}}>About</NavLink>\r\n\r\n                    <span> | </span>\r\n\r\n                    <NavLink to=\"/cart\" activeClassName=\"active\" activeStyle={{color:'red'}}>Cart</NavLink>\r\n\r\n                    <span> | </span>\r\n\r\n                    <NavLink to=\"/login\" activeClassName=\"active\" activeStyle={{color:'red'}}>Login</NavLink>\r\n\r\n                </nav>\r\n\r\n                <Switch>\r\n\r\n                    <Route path=\"/:page(\\d*)\" render={props=>(<Home {...props} items={this.state.items} />)}></Route>\r\n                    \r\n                    <Route path='/item/:id(\\d+)' render={props => {\r\n                        return <Item {...props} items={this.state.items}/>\r\n                    }} />\r\n\r\n                    <Route path=\"/cart\" render={props=>{\r\n                        if(this.state.user.id>0){\r\n                            return <Cart/>\r\n                        }else{\r\n                            return <Link to=\"/login\">没有权限,请先登录</Link>\r\n                            // return <Redirect to=\"/login\"/>\r\n                        }\r\n\r\n                    }}></Route>\r\n\r\n                    <Route path=\"/about\" component={About}></Route>\r\n\r\n                    <Route path=\"/login\" activeClassName=\"active\" activeStyle={{color:'red'}} render={props=>{\r\n                        return <Login {...props} onLogin ={this.login.bind(this)} />\r\n                    }}></Route>\r\n\r\n                    <Route component={NotFound} />\r\n\r\n                </Switch>\r\n            </Router>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}","import React from 'react';\n\n\nimport Main from './main/';\n\nfunction App() {\n\n  return (\n      <Main />\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}